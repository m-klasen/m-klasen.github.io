(()=>{const e=document.documentElement,t=window.MutationObserver||window.WebKitMutationObserver,n={hide_feed:!1,hide_redirect_home:!1,hide_subs:!1,hide_notifs:!1},i=Object.keys(n);let o,c,r=!1,u=!1,s=!1,d=!1,a=!1,l=!1;function m(e,t,n){(n&&o||!n&&c)&&"true"===t.getAttribute("aria-checked")&&(t.click(),setTimeout(m.bind(null,e,t,n),e))}function f(e){const t=e.getElementsByClassName("annOption");for(let e=0;e<t.length;e+=1)h(t[e],1500);return!t.length}function h(e,t){"true"===e.getAttribute("aria-checked")?(e.click(),setTimeout(m.bind(null,t,e,!1),t)):document.getElementsByClassName("ytp-iv-video-content").length&&(e.click(),e.click())}function g(e,t){const n=e.querySelector(".ytp-menuitem[role=menuitemcheckbox]");n&&(n.classList.add("annOption"),c&&h(n,t))}function y(e,t){const n=2500;e.firstChild?g(e,n):setTimeout((()=>{t.click(),t.click(),g(e,n)}),n)}function b(e,n){new t((t=>{f(e)&&y(e,n)})).observe(e,{childList:!0})}function w(e,n){const i=e.getElementsByClassName("ytp-settings-button");if(i.length){const t=i[i.length-1];t.click(),t.click();const o=e.getElementsByClassName("ytp-panel-menu"),c=o[o.length-1];y(c,t),n?a||(b(c,t),a=!0):l||(b(c,t),l=!0)}else e.hidden||!document.body.contains(e)||e.getElementsByClassName("ytp-unmute").length||e.getElementsByClassName("watchThumbImageContainer").length||new t((function(){e.getElementsByClassName("ytp-unmute").length&&(w(e,n),this.disconnect())})).observe(e,{childList:!0,subtree:!0})}function p(e,t){f(e)&&w(e,t)}function v(e,t){if(!window.Polymer)return!1;const n=document.getElementsByTagName("ytd-watch-flexy")[0];if(n&&!n.hidden){if(e){const e=n.getElementsByClassName("ytp-autonav-toggle-button")[0];e&&"true"===e.getAttribute("aria-checked")&&e.click()}t&&p(n,!0)}else if(t){const e=document.querySelector("ytd-browse[page-subtype=channels]");e&&!e.hidden&&e.getElementsByTagName("ytd-channel-video-player-renderer").length&&p(e,!1)}return!0}function E(e,t){if(!document.getElementById("player-container-id"))return!1;const n=document.getElementById("player");if(n&&!n.hidden){if(e){const e=document.querySelector(".ytm-autonav-toggle > button");e&&"true"===e.getAttribute("aria-pressed")&&e.click()}t&&p(n,!0)}return!0}function _(e){c&&p(e,!0)}function k(e){const t=e.getElementsByTagName("video")[0];return!!t&&(t.addEventListener("loadeddata",(()=>_(e))),_(e),!0)}function N(){if(window===window.parent)return!1;const e=document.getElementById("player");return!!e&&(u?_(e):(u=!0,k(e)||new t((function(){k(e)&&this.disconnect()})).observe(e,{childList:!0})),!0)}function B(e){const t=/^\(\d+\) +/;t.test(e.innerText)&&(e.innerText=e.innerText.replace(t,""))}function L(){if(s)return;const e=document.getElementsByTagName("title")[0];e&&(B(e),function(e){new t((function(){n.hide_notifs?B(e):(s=!1,this.disconnect())})).observe(e,{childList:!0})}(e),s=!0)}function A(e){e.stopPropagation()}const T="https://www.youtube.com/feed/subscriptions";function C(e){e.href!==T&&(e.addEventListener("click",A,!0),e.addEventListener("touchend",A,!0),e.href=T)}function S(){return n.hide_feed&&n.hide_redirect_home&&!n.hide_subs}function x(){if(d)return;const e=document.querySelector("a#logo");e&&(C(e),function(e){new t((function(){r?C(e):(d=!1,this.disconnect())})).observe(e,{attributes:!0,attributeFilter:["href"]})}(e),d=!0)}function O(){const e=document.querySelector("a#logo");e&&e.href===T&&(e.removeEventListener("click",A,!0),e.removeEventListener("touchend",A,!0),e.href="/")}function P(t){if(null==c&&(o="true"===e.getAttribute("hide_autoplay"),c="true"===e.getAttribute("hide_annotations"),window.Polymer)){for(let t=0;t<=i.length;t+=1)n[i[t]]="true"===e.getAttribute(i[t]);r=S(),-1===document.cookie.indexOf("SID=")&&e.setAttribute("yt-signed-out","")}window.Polymer&&(n.hide_notifs&&L(),r&&x()),(o||c)&&(window.Polymer?v(o,c):1===t?!E(o,c)&&c&&N():2===t&&E(o,c))}window.addEventListener("load",P.bind(null,1)),window.addEventListener("yt-page-data-updated",P),window.addEventListener("state-navigateend",P.bind(null,2)),"complete"===document.readyState&&P(1),new t((t=>{if(null!=c)for(let i=0;i<t.length;i+=1)if("hide_autoplay"===t[i].attributeName)o="true"===e.getAttribute("hide_autoplay"),o&&(v(!0,!1)||E(!0,!1));else if("hide_annotations"===t[i].attributeName)c="true"===e.getAttribute("hide_annotations"),c&&(v(!1,!0)||E(!1,!0)||N());else if(window.Polymer)if(n[t[i].attributeName]="true"===e.getAttribute(t[i].attributeName),"hide_notifs"===t[i].attributeName)n.hide_notifs&&L();else{const e=r;r=S(),r?x():e&&O()}})).observe(e,{attributes:!0,attributeFilter:["hide_autoplay","hide_annotations",...i]})})();